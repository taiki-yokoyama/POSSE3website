name: Discord Custom Notification

on:
    pull_request:
        types: [opened, closed] # PRä½œæˆæ™‚ã¨ãƒãƒ¼ã‚¸æ™‚ã«ãƒˆãƒªã‚¬ãƒ¼
jobs:
    notify:
        runs-on: ubuntu-latest
        steps:
            - name: Send Message
              run: |
                  # ä½œæˆæ™‚ã¨ãƒãƒ¼ã‚¸æ™‚ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’åˆ‡ã‚Šåˆ†ã‘
                  if [[ "${{ github.event.action }}" == "opened" ]]; then
                    TITLE="ğŸš€ PRãŒä½œæˆã•ã‚ŒãŸã‚ˆï¼"
                    BODY="${{ github.actor }} ãŒPRã‚’ä½œæˆã—ãŸã‚ˆï¼ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã‚ˆã†ï¼\nã‚¿ã‚¤ãƒˆãƒ«: ${{ github.event.pull_request.title }}"
                  elif [[ "${{ github.event.pull_request.merged }}" == "true" ]]; then
                    TITLE="âœ… ãƒãƒ¼ã‚¸å®Œäº†ï¼"
                    BODY="${{ github.actor }} ã®PRãŒãƒãƒ¼ã‚¸ã•ã‚ŒãŸã‚ˆï¼ãŠç–²ã‚Œæ§˜ï¼"
                  fi

                  # Discordã¸é€ä¿¡
                  curl -X POST -H "Content-Type: application/json" \
                    -d "{
                      \"embeds\": [{
                        \"title\": \"$TITLE\",
                        \"description\": \"$BODY\",
                        \"url\": \"${{ github.event.pull_request.html_url }}\",
                        \"color\": 5814783
                      }]
                    }" \
                    ${{ secrets.DISCORD_WEBHOOK_URL }}
